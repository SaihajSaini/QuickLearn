'use strict';

var s = require('path');
var fs = require('fs');
var promises = require('fs/promises');
var crypto = require('crypto');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var s__default = /*#__PURE__*/_interopDefault(s);

var k=Object.defineProperty;var t=(e,r)=>k(e,"name",{value:r,configurable:!0}),f=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,i)=>(typeof require<"u"?require:r)[i]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var S=Object.defineProperty,o=t((e,r)=>S(e,"name",{value:r,configurable:!0}),"r");function m(){return process.cwd()}t(m,"C");o(m,"rootDir");function v(){let{CHROMATIC_ARCHIVE_LOCATION:e}=process.env;return e}t(v,"F");o(v,"outputDirOverride");function n(e){let r=v()||e;return s__default.default.resolve(m(),r,"chromatic-archives")}t(n,"d");o(n,"archivesDir");function j(e){return s__default.default.resolve(n(e),"archive")}t(j,"J");o(j,"assetsDir");function J(e){let r=n(e);if(!fs.existsSync(r))throw new Error(`Chromatic archives directory cannot be found: ${r}

Please make sure that you have run your E2E tests, or have set the CHROMATIC_ARCHIVE_LOCATION env var if the output directory for the tests is not in the standard location.`)}t(J,"M");o(J,"checkArchivesDirExists");function D(e){fs.existsSync(e)||fs.mkdirSync(e,{recursive:!0});}t(D,"B");o(D,"ensureDir");async function y(e,r){return D(s__default.default.dirname(e)),promises.writeFile(e,r,{mode:511})}t(y,"D");o(y,"outputFile");async function R(e,r){return y(e,JSON.stringify(r))}t(R,"R");o(R,"outputJSONFile");async function H(e){let r=await promises.readFile(e);return JSON.parse(r.toString())}t(H,"j");o(H,"readJSONFile");function O(e){return crypto.createHash("shake256",{outputLength:2}).update(e).digest("hex")}t(O,"L");o(O,"hash");var U=255;function M(e,r=U){let i=new TextEncoder,E=new TextDecoder,h=e.split("/"),a=h.pop();if(i.encode(a).byteLength<=r)return e;let d=O(a),[F,...A]=a.split("."),N=i.encode(F),c=A.join("."),_=c.length===0?0:i.encode(c).byteLength+1,g=i.encode(d).byteLength+_,L=N.slice(0,r-g),b=[`${E.decode(L)}${d}`,c].filter(Boolean).join(".");return [...h,b].join("/")}t(M,"$");o(M,"truncateFileName");var l="test-results";function T(e){return s__default.default.dirname(f.resolve(s__default.default.join(e,"package.json")))}t(T,"getAbsolutePath");var W={stories:[s__default.default.resolve(n(l),"*.stories.json")],addons:[T("@storybook/addon-essentials"),"."],framework:{name:T("@storybook/server-webpack5"),options:{}},staticDirs:[s__default.default.resolve(n(l),"archive")]};

module.exports = W;
//# sourceMappingURL=out.js.map
//# sourceMappingURL=main.js.map